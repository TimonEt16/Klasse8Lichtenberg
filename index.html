<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offertly - KI-Angebotsgenerator für Selbstständige</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #2a4bc9;
            --secondary: #6c63ff;
            --accent: #06d6a0;
            --light: #ffffff;
            --dark: #121826;
            --gray: #6c757d;
            --light-gray: #f5f7fa;
            --border-radius: 12px;
            --shadow: 0 10px 30px rgba(0,0,0,0.05);
            --transition: all 0.3s ease;
            --card-shadow: 0 8px 24px rgba(0,0,0,0.04);
            --header-height: 80px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--light-gray);
            color: #4a5568;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
        }

        /* Header Styling */
        header {
            height: var(--header-height);
            background: var(--light);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            padding: 0 5%;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            font-size: 28px;
            color: var(--primary);
        }

        .logo-text {
            font-size: 22px;
            font-weight: 700;
            color: var(--dark);
            letter-spacing: -0.5px;
        }

        .ai-badge {
            background: linear-gradient(135deg, var(--accent) 0%, #06b6d4 100%);
            color: var(--dark);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        nav {
            margin-left: auto;
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .nav-link {
            color: #4a5568;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.25);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-secondary:hover {
            background: rgba(67, 97, 238, 0.05);
        }

        /* Main Content */
        .main-container {
            flex: 1;
            padding: 30px 5%;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }

        .hero-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 60px;
        }

        @media (max-width: 1024px) {
            .hero-section {
                grid-template-columns: 1fr;
            }
        }

        .hero-text {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .hero-title {
            font-size: 44px;
            font-weight: 800;
            line-height: 1.2;
            color: var(--dark);
            margin-bottom: 20px;
        }

        .hero-title span {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero-subtitle {
            font-size: 20px;
            color: #4a5568;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .stat-card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--gray);
        }

        .hero-image {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .image-container {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, #4361ee 0%, #6c63ff 100%);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(67, 97, 238, 0.2);
        }

        .image-container img {
            max-width: 80%;
            filter: drop-shadow(0 20px 30px rgba(0,0,0,0.15));
        }

        /* App Container */
        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 60px;
        }

        @media (max-width: 1024px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }

        .app-card {
            background: var(--light);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .card-header {
            padding: 25px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(67, 97, 238, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 18px;
        }

        .card-body {
            padding: 30px;
            flex: 1;
            overflow-y: auto;
        }

        /* Form Styling */
        .form-section {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        label {
            font-weight: 600;
            font-size: 14px;
            color: var(--dark);
        }

        .required::after {
            content: " *";
            color: #e53e3e;
        }

        input, textarea, select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            transition: var(--transition);
            background: var(--light);
            color: var(--dark);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        .input-hint {
            font-size: 13px;
            color: var(--gray);
            font-style: italic;
            margin-top: 5px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        /* Custom Branch Input */
        .custom-branch {
            display: none;
            margin-top: 10px;
        }

        .custom-branch.show {
            display: block;
        }

        /* Preview Styling */
        .preview-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            min-height: 100%;
            font-family: 'Georgia', serif;
            line-height: 1.6;
            box-shadow: 0 0 10px rgba(0,0,0,0.03);
            position: relative;
            border: 1px solid #edf2f7;
        }

        .offer-header {
            border-bottom: 2px solid var(--primary);
            padding-bottom: 25px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .company-info {
            flex: 1;
        }

        .company-name {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .company-address {
            color: var(--gray);
            font-size: 14px;
            line-height: 1.5;
        }

        .offer-meta {
            text-align: right;
        }

        .offer-number {
            font-size: 16px;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .offer-date {
            color: var(--gray);
            font-size: 14px;
        }

        .customer-info {
            background: var(--light-gray);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 15px;
        }

        .customer-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary);
        }

        .offer-content {
            margin-bottom: 30px;
        }

        .offer-greeting {
            margin-bottom: 25px;
        }

        .service-description {
            background: #f0f4ff;
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            margin: 25px 0;
            font-size: 15px;
        }

        .price-section {
            background: #f8faff;
            padding: 25px;
            border-radius: 8px;
            margin-top: 25px;
            border: 1px solid #e2e8f0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
            padding: 5px 0;
        }

        .price-total {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
            border-top: 2px solid var(--primary);
            padding-top: 12px;
            margin-top: 12px;
        }

        .terms-section {
            margin-top: 35px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            font-size: 13px;
            color: var(--gray);
        }

        .empty-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            height: 100%;
            padding: 30px;
            color: var(--gray);
        }

        .empty-icon {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 25px;
            opacity: 0.6;
        }

        .empty-title {
            font-size: 22px;
            margin-bottom: 15px;
            color: var(--dark);
            font-weight: 600;
        }

        .empty-text {
            max-width: 400px;
            margin-bottom: 25px;
        }

        .loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            z-index: 10;
            border-radius: 8px;
            display: none;
        }

        .loading.show {
            display: flex;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid #e2e8f0;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--accent);
            color: var(--dark);
            border-radius: 8px;
            font-weight: 600;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: #a0aec0;
            padding: 60px 5% 40px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (max-width: 1024px) {
            .footer-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .footer-container {
                grid-template-columns: 1fr;
            }
        }

        .footer-logo {
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-text {
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-heading {
            font-size: 18px;
            font-weight: 600;
            color: white;
            margin-bottom: 25px;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .footer-link {
            color: #a0aec0;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-link:hover {
            color: white;
        }

        .footer-link i {
            width: 20px;
            text-align: center;
        }

        .copyright {
            text-align: center;
            padding-top: 40px;
            margin-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #718096;
            font-size: 14px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            header {
                padding: 0 20px;
                height: 70px;
            }
            
            .logo-text {
                font-size: 18px;
            }
            
            .nav-link span {
                display: none;
            }
            
            .hero-title {
                font-size: 32px;
            }
            
            .hero-subtitle {
                font-size: 18px;
            }
            
            .hero-stats {
                grid-template-columns: 1fr;
            }
            
            .main-container {
                padding: 20px;
            }
            
            .card-body {
                padding: 20px;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .card-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .hero-title {
                font-size: 28px;
            }
            
            .hero-subtitle {
                font-size: 16px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-value {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo-container">
            <i class="fas fa-file-invoice-dollar logo-icon"></i>
            <div class="logo-text">Offertly <span class="ai-badge">KI-POWERED</span></div>
        </div>
        
        <nav>
            <a href="#" class="nav-link"><i class="fas fa-home"></i> <span>Start</span></a>
            <a href="#" class="nav-link"><i class="fas fa-lightbulb"></i> <span>Funktionen</span></a>
            <a href="#" class="nav-link"><i class="fas fa-dollar-sign"></i> <span>Preise</span></a>
            <a href="#" class="nav-link"><i class="fas fa-question-circle"></i> <span>Hilfe</span></a>
            <button class="btn btn-secondary"><i class="fas fa-user"></i> Anmelden</button>
            <button class="btn btn-primary"><i class="fas fa-rocket"></i> Kostenlos starten</button>
        </nav>
    </header>

    <!-- Hero Section -->
    <div class="main-container">
        <section class="hero-section">
            <div class="hero-text">
                <h1 class="hero-title">Erstellen Sie <span>professionelle Angebote</span> in Minuten, nicht Stunden</h1>
                <p class="hero-subtitle">Mit künstlicher Intelligenz generierte Angebote für Handwerker, Freelancer und Selbstständige. Sparen Sie Zeit und überzeugen Sie Ihre Kunden.</p>
                
                <div class="form-actions">
                    <button class="btn btn-primary" style="padding: 14px 28px; font-size: 16px;" id="heroGenerateBtn">
                        <i class="fas fa-bolt"></i> Jetzt Angebot erstellen
                    </button>
                    <button class="btn btn-secondary" style="padding: 14px 28px; font-size: 16px;" id="heroDemoBtn">
                        <i class="fas fa-play-circle"></i> Demo ansehen
                    </button>
                </div>
                
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-value">5.2k+</div>
                        <div class="stat-label">Zufriedene Nutzer</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">27k+</div>
                        <div class="stat-label">Erstellte Angebote</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">94%</div>
                        <div class="stat-label">Kundenzufriedenheit</div>
                    </div>
                </div>
            </div>
            
            <div class="hero-image">
                <div class="image-container">
                    <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Offertly Dashboard">
                </div>
            </div>
        </section>

        <!-- App Container -->
        <section class="app-container">
            <!-- Form Panel -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        Angebot erstellen
                    </div>
                    <div>
                        <button class="btn btn-secondary" id="resetBtn">
                            <i class="fas fa-redo"></i> Zurücksetzen
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <form id="offerForm" class="form-section">
                        <div class="form-group">
                            <label for="businessName" class="required">Ihr Firmenname</label>
                            <input type="text" id="businessName" name="businessName" required 
                                   placeholder="z.B. Malerbetrieb Schmidt GmbH">
                        </div>

                        <div class="form-group">
                            <label for="businessAddress">Ihre Firmenadresse</label>
                            <textarea id="businessAddress" name="businessAddress" 
                                      placeholder="Firmenstraße 123&#10;12345 Stadt&#10;Tel: 0123/456789"></textarea>
                            <div class="input-hint">Wird im Angebot als Absender angezeigt</div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="businessType">Branche</label>
                                <select id="businessType" name="businessType">
                                    <option value="handwerk">Handwerk</option>
                                    <option value="maler">Maler/Lackierer</option>
                                    <option value="elektriker">Elektriker</option>
                                    <option value="it">IT/Webdesign</option>
                                    <option value="beratung">Beratung/Coaching</option>
                                    <option value="fotografie">Fotografie</option>
                                    <option value="reinigung">Reinigung</option>
                                    <option value="garten">Garten/Landschaft</option>
                                    <option value="sonstiges">Sonstiges</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="offerDate">Angebotsdatum</label>
                                <input type="date" id="offerDate" name="offerDate">
                            </div>
                        </div>
                        
                        <!-- Custom Branch Input -->
                        <div class="form-group custom-branch" id="customBranchContainer">
                            <label for="customBranch" class="required">Bitte Branche angeben</label>
                            <input type="text" id="customBranch" name="customBranch" 
                                   placeholder="z.B. Eventmanagement, Tierpflege...">
                        </div>

                        <div class="form-group">
                            <label for="customerName" class="required">Kundenname</label>
                            <input type="text" id="customerName" name="customerName" required 
                                   placeholder="Max Mustermann">
                        </div>

                        <div class="form-group">
                            <label for="customerAddress">Kundenadresse</label>
                            <textarea id="customerAddress" name="customerAddress" 
                                      placeholder="Musterstraße 123&#10;12345 Musterstadt"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="serviceDescription" class="required">Leistungsbeschreibung</label>
                            <textarea id="serviceDescription" name="serviceDescription" required
                                      placeholder="z.B. Streichen von 40m² Wandfläche, 2 Anstriche, inkl. Material"></textarea>
                            <div class="input-hint">Beschreiben Sie kurz, was Sie anbieten. Die KI erstellt daraus professionelle Formulierungen.</div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="totalPrice" class="required">Gesamtpreis (€)</label>
                                <input type="number" id="totalPrice" name="totalPrice" required 
                                       step="0.01" placeholder="480.00" min="0">
                            </div>
                            <div class="form-group">
                                <label for="vatRate">MwSt. (%)</label>
                                <select id="vatRate" name="vatRate">
                                    <option value="19">19% (Standard)</option>
                                    <option value="7">7% (ermäßigt)</option>
                                    <option value="0">0% (Kleinunternehmer)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="deliveryTime">Ausführungszeitraum</label>
                            <input type="text" id="deliveryTime" name="deliveryTime" 
                                   placeholder="z.B. KW 32/2025 oder nach Vereinbarung">
                        </div>

                        <div class="form-group">
                            <label for="paymentTerms">Zahlungsbedingungen</label>
                            <select id="paymentTerms" name="paymentTerms">
                                <option value="sofort">Zahlung bei Auftragserteilung</option>
                                <option value="abnahme">Zahlung bei Abnahme</option>
                                <option value="14tage">Zahlung innerhalb 14 Tagen</option>
                                <option value="30tage">Zahlung innerhalb 30 Tagen</option>
                                <option value="anzahlung">50% Anzahlung, Rest bei Fertigstellung</option>
                            </select>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="generateBtn" style="flex: 1; padding: 16px;">
                                <i class="fas fa-robot"></i> Angebot erstellen
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        Angebotsvorschau
                    </div>
                    <div>
                        <button class="btn btn-secondary" id="downloadBtn">
                            <i class="fas fa-download"></i> PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="preview-container" id="previewContainer">
                        <div class="loading" id="loading">
                            <div class="loader"></div>
                            <div class="loading-text">KI generiert Ihr Angebot...</div>
                        </div>
                        <div id="previewContent">
                            <div class="empty-preview">
                                <i class="fas fa-file-alt empty-icon"></i>
                                <h3 class="empty-title">Ihr Angebot erscheint hier</h3>
                                <p class="empty-text">Füllen Sie das Formular aus und klicken Sie auf "Angebot erstellen", um eine professionelle Angebotsvorlage zu generieren.</p>
                                <button class="btn btn-secondary" id="demoBtn">
                                    <i class="fas fa-magic"></i> Demo anzeigen
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Vorgang erfolgreich abgeschlossen</span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div>
                <div class="footer-logo">
                    <i class="fas fa-file-invoice-dollar"></i>
                    Offertly
                </div>
                <p class="footer-text">
                    Professionelle Angebote in Minuten erstellen mit künstlicher Intelligenz. 
                    Speziell entwickelt für Handwerker, Freelancer und Selbstständige.
                </p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            
            <div>
                <h3 class="footer-heading">Produkt</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Funktionen</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Preise</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Integrationen</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Updates</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Demo</a>
                </div>
            </div>
            
            <div>
                <h3 class="footer-heading">Ressourcen</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Dokumentation</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Blog</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Tutorials</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Support</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Community</a>
                </div>
            </div>
            
            <div>
                <h3 class="footer-heading">Unternehmen</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Über uns</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Karriere</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Partner</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Kontakt</a>
                    <a href="#" class="footer-link"><i class="fas fa-angle-right"></i> Presse</a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2023 Offertly GmbH. Alle Rechte vorbehalten.
        </div>
    </footer>

    <script>
        // Globale Variablen
        let currentOfferData = null;
        const { jsPDF } = window.jspdf;
        
        // DOM-Elemente
        const offerForm = document.getElementById('offerForm');
        const generateBtn = document.getElementById('generateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const demoBtn = document.getElementById('demoBtn');
        const heroDemoBtn = document.getElementById('heroDemoBtn');
        const heroGenerateBtn = document.getElementById('heroGenerateBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const previewContainer = document.getElementById('previewContainer');
        const previewContent = document.getElementById('previewContent');
        const loading = document.getElementById('loading');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        const businessTypeSelect = document.getElementById('businessType');
        const customBranchContainer = document.getElementById('customBranchContainer');
        const customBranchInput = document.getElementById('customBranch');
        
        // Initialisierung
        function init() {
            // Aktuelles Datum setzen
            document.getElementById('offerDate').valueAsDate = new Date();
            
            // Event-Listener
            offerForm.addEventListener('submit', generateOffer);
            resetBtn.addEventListener('click', resetForm);
            demoBtn.addEventListener('click', loadDemoData);
            heroDemoBtn.addEventListener('click', loadDemoData);
            heroGenerateBtn.addEventListener('click', () => {
                document.querySelector('.app-container').scrollIntoView({ behavior: 'smooth' });
            });
            downloadBtn.addEventListener('click', generatePDF);
            
            // Branchen-Änderung Event-Listener
            businessTypeSelect.addEventListener('change', toggleCustomBranch);
        }
        
        // Branchen-Eingabe anzeigen/verstecken
        function toggleCustomBranch() {
            if (businessTypeSelect.value === 'sonstiges') {
                customBranchContainer.classList.add('show');
                customBranchInput.required = true;
            } else {
                customBranchContainer.classList.remove('show');
                customBranchInput.required = false;
            }
        }
        
        // Toast anzeigen
        function showToast(message) {
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Formular zurücksetzen
        function resetForm() {
            offerForm.reset();
            document.getElementById('offerDate').valueAsDate = new Date();
            previewContent.innerHTML = `
                <div class="empty-preview">
                    <i class="fas fa-file-alt empty-icon"></i>
                    <h3 class="empty-title">Ihr Angebot erscheint hier</h3>
                    <p class="empty-text">Füllen Sie das Formular aus und klicken Sie auf "Angebot erstellen", um eine professionelle Angebotsvorlage zu generieren.</p>
                    <button class="btn btn-secondary" id="demoBtn">
                        <i class="fas fa-magic"></i> Demo anzeigen
                    </button>
                </div>
            `;
            // Event-Listener für Demo-Button neu setzen
            document.getElementById('demoBtn').addEventListener('click', loadDemoData);
            toggleCustomBranch(); // Zurücksetzen der Branchen-Anzeige
            showToast('Formular zurückgesetzt');
        }
        
        // Angebotsnummer generieren
        function generateOfferNumber() {
            const year = new Date().getFullYear();
            const month = String(new Date().getMonth() + 1).padStart(2, '0');
            const random = Math.floor(Math.random() * 999) + 1;
            return `${year}${month}-${random.toString().padStart(3, '0')}`;
        }
        
        // KI-Textgenerierung
        function generateOfferText(data) {
            const branchTemplates = {
                maler: {
                    greeting: `Sehr geehrte ${data.customerName.split(' ')[0] === 'Familie' ? 'Familie' : 'Herr/Frau'} ${data.customerName.split(' ').pop()},`,
                    intro: 'vielen Dank für Ihre Anfrage bezüglich der Malerarbeiten. Wir freuen uns, Ihnen folgendes Angebot unterbreiten zu dürfen:',
                    services: [
                        'Fachgerechte Vorbereitung der Untergründe',
                        'Verwendung hochwertiger, schadstoffarmer Farben und Materialien',
                        'Sorgfältiges Abkleben und Abdecken aller Flächen',
                        'Grundierung der Oberflächen für optimale Haftung',
                        'Zwei Deckanstriche mit Premium-Dispersionsfarbe',
                        'Saubere Ausführung und Entsorgung von Materialresten'
                    ],
                    closing: 'Wir stehen für Rückfragen gerne zur Verfügung und freuen uns auf eine mögliche Zusammenarbeit.'
                },
                elektriker: {
                    greeting: `Sehr geehrte/r ${data.customerName.split(' ')[0]},`,
                    intro: 'herzlichen Dank für Ihre Anfrage. Gerne unterbreiten wir Ihnen unser Angebot für die Elektroarbeiten:',
                    services: [
                        'Fachgerechte Installation nach aktuellen VDE-Vorschriften',
                        'Verwendung von geprüften Materialien und Komponenten',
                        'Dokumentation aller durchgeführten Arbeiten',
                        'Abschlussmessung und Abnahme der Anlagen',
                        'Einweisung in die Funktion der installierten Systeme'
                    ],
                    closing: 'Für weitere Informationen stehen wir Ihnen gerne zur Verfügung.'
                },
                it: {
                    greeting: `Sehr geehrte/r ${data.customerName.split(' ')[0]},`,
                    intro: 'vielen Dank für Ihr Interesse an unseren IT-Dienstleistungen. Wir freuen uns, Ihnen folgendes Angebot vorlegen zu können:',
                    services: [
                        'Individuelle Konzeption und Planung',
                        'Moderne und responsive Umsetzung',
                        'Testing und Qualitätssicherung',
                        'Dokumentation aller Entwicklungen',
                        'Einweisung und Schulung',
                        'Technischer Support nach Vereinbarung'
                    ],
                    closing: 'Wir freuen uns auf Ihre Rückmeldung und eine mögliche Zusammenarbeit.'
                },
                beratung: {
                    greeting: `Sehr geehrte/r ${data.customerName.split(' ')[0]},`,
                    intro: 'vielen Dank für Ihr Interesse an unseren Beratungsdienstleistungen. Gerne unterbreiten wir Ihnen folgendes Angebot:',
                    services: [
                        'Individuelle Bedarfsanalyse',
                        'Maßgeschneiderte Konzepte und Lösungen',
                        'Praktische Umsetzungsbegleitung',
                        'Dokumentation und Ergebnispräsentation',
                        'Nachbetreuung und Follow-up'
                    ],
                    closing: 'Wir stehen für weitere Fragen gerne zur Verfügung.'
                },
                default: {
                    greeting: `Sehr geehrte/r ${data.customerName.split(' ')[0]},`,
                    intro: 'vielen Dank für Ihre Anfrage. Gerne unterbreiten wir Ihnen folgendes Angebot:',
                    services: [
                        'Fachgerechte Durchführung der vereinbarten Leistungen',
                        'Verwendung hochwertiger Materialien und Werkzeuge',
                        'Termingerechte Ausführung',
                        'Sorgfältige Arbeitsweise',
                        'Gewährleistung gemäß gesetzlicher Bestimmungen'
                    ],
                    closing: 'Für Rückfragen stehen wir Ihnen gerne zur Verfügung.'
                }
            };
            
            // Wenn "Sonstiges" ausgewählt ist, verwende den benutzerdefinierten Branchennamen
            let branch = data.businessType;
            if (branch === 'sonstiges' && data.customBranch) {
                branch = data.customBranch.toLowerCase();
            }
            
            const template = branchTemplates[branch] || branchTemplates.default;
            
            return {
                greeting: template.greeting,
                intro: template.intro,
                services: [...template.services, ...data.serviceDescription.split('. ').filter(item => item.trim())],
                closing: template.closing
            };
        }
        
        // Zahlungsbedingungen-Text
        function getPaymentTermsText(paymentTerms) {
            const terms = {
                'sofort': 'Zahlung bei Auftragserteilung',
                'abnahme': 'Zahlung bei Abnahme der Leistung',
                '14tage': 'Zahlung innerhalb von 14 Tagen nach Rechnungsstellung',
                '30tage': 'Zahlung innerhalb von 30 Tagen nach Rechnungsstellung',
                'anzahlung': '50% Anzahlung bei Auftragserteilung, Restzahlung bei Fertigstellung'
            };
            return terms[paymentTerms] || terms['abnahme'];
        }
        
        // Demo-Daten laden
        function loadDemoData() {
            const demoData = {
                businessName: 'Malerbetrieb Schmidt GmbH',
                businessAddress: 'Handwerkerstraße 45\n12345 Musterstadt\nTel: 0123/456789\ninfo@maler-schmidt.de',
                businessType: 'maler',
                customerName: 'Familie Müller',
                customerAddress: 'Eichenstraße 123\n54321 Beispielstadt',
                serviceDescription: 'Streichen von ca. 45 m² Wandfläche im Wohnzimmer und Flur mit hochwertiger Dispersionsfarbe, inklusive Abkleben, Abdecken, Grundierung und zwei Anstriche. Verwendung von schadstoffarmer Innenfarbe.',
                totalPrice: '650.00',
                vatRate: '19',
                deliveryTime: 'KW 35/2025 (nach Absprache)',
                paymentTerms: 'abnahme'
            };

            // Formular mit Demo-Daten füllen
            Object.keys(demoData).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.value = demoData[key];
                }
            });

            // Branchen-Anzeige aktualisieren
            toggleCustomBranch();
            
            // Angebot generieren
            generateOffer({ preventDefault: () => {} });
            
            showToast('Demo-Daten geladen');
        }
        
        // Angebot generieren
        function generateOffer(e) {
            e.preventDefault();
            
            const formData = new FormData(offerForm);
            const data = Object.fromEntries(formData.entries());
            
            // Wenn "Sonstiges" ausgewählt ist, benutzerdefinierte Branche hinzufügen
            if (data.businessType === 'sonstiges') {
                data.businessType = data.customBranch || 'sonstiges';
            }
            
            // Validierung
            if (!data.businessName || !data.customerName || !data.serviceDescription || !data.totalPrice) {
                showToast('Bitte füllen Sie alle Pflichtfelder aus');
                return;
            }
            
            if (isNaN(parseFloat(data.totalPrice))) {
                showToast('Bitte geben Sie einen gültigen Preis ein');
                return;
            }
            
            // Loading anzeigen
            loading.classList.add('show');
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Wird erstellt...';
            
            // Simulation der KI-Verarbeitung
            setTimeout(() => {
                const offerNumber = generateOfferNumber();
                const aiText = generateOfferText(data);
                
                // Preisberechnung
                const netPrice = parseFloat(data.totalPrice);
                const vatRate = parseFloat(data.vatRate);
                const vatAmount = netPrice * (vatRate / 100);
                const grossPrice = netPrice + vatAmount;
                
                // Angebots-HTML erstellen
                const offerHTML = `
                    <div class="offer-header">
                        <div class="company-info">
                            <div class="company-name">${data.businessName}</div>
                            <div class="company-address">${data.businessAddress.replace(/\n/g, '<br>')}</div>
                        </div>
                        <div class="offer-meta">
                            <div class="offer-number">Angebot Nr.: ${offerNumber}</div>
                            <div class="offer-date">Datum: ${new Date(data.offerDate).toLocaleDateString('de-DE')}</div>
                        </div>
                    </div>
                    
                    <div class="customer-info">
                        <div class="customer-title">Kunde:</div>
                        ${data.customerName}<br>
                        ${data.customerAddress.replace(/\n/g, '<br>')}
                    </div>
                    
                    <div class="offer-content">
                        <div class="offer-greeting">
                            <p>${aiText.greeting}</p>
                            <br>
                            <p>${aiText.intro}</p>
                        </div>
                        
                        <div class="service-description">
                            <strong>Leistungsbeschreibung:</strong><br><br>
                            ${data.serviceDescription.replace(/\n/g, '<br>')}
                            
                            <div style="margin-top: 15px;">
                                <strong>Inkludierte Leistungen:</strong>
                                <ul style="margin-top: 8px; padding-left: 20px;">
                                    ${aiText.services.map(service => `<li>${service}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        
                        <div class="price-section">
                            <div class="price-row">
                                <span>Nettopreis:</span>
                                <span>${netPrice.toFixed(2)} €</span>
                            </div>
                            
                            ${vatRate > 0 ? `
                                <div class="price-row">
                                    <span>zzgl. ${vatRate}% MwSt.:</span>
                                    <span>${vatAmount.toFixed(2)} €</span>
                                </div>
                                <div class="price-row price-total">
                                    <span>Gesamtpreis:</span>
                                    <span>${grossPrice.toFixed(2)} €</span>
                                </div>
                            ` : `
                                <div class="price-row price-total">
                                    <span>Gesamtpreis:</span>
                                    <span>${netPrice.toFixed(2)} € (inkl. USt. gem. §19 UStG)</span>
                                </div>
                            `}
                        </div>
                        
                        <div style="margin-top: 25px;">
                            <strong>Zahlungsbedingungen:</strong><br>
                            ${getPaymentTermsText(data.paymentTerms)}
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <strong>Ausführungszeitraum:</strong><br>
                            ${data.deliveryTime || 'Nach Vereinbarung'}
                        </div>
                        
                        <br>
                        <p>${aiText.closing}</p>
                        <br>
                        <p>Mit freundlichen Grüßen</p>
                        <p style="margin-top: 10px;"><strong>${data.businessName}</strong></p>
                    </div>
                    
                    <div class="terms-section">
                        <strong>Hinweise:</strong><br>
                        • Dieses Angebot ist 30 Tage ab Ausstellungsdatum gültig<br>
                        • Alle Preise verstehen sich zuzüglich der gesetzlichen Mehrwertsteuer, sofern nicht anders angegeben<br>
                        • Änderungen und Zusatzleistungen werden gesondert berechnet<br>
                        • Es gelten unsere Allgemeinen Geschäftsbedingungen
                    </div>
                `;
                
                previewContent.innerHTML = offerHTML;
                
                // Daten für PDF speichern
                currentOfferData = {
                    html: offerHTML,
                    data: data,
                    offerNumber: offerNumber,
                    netPrice: netPrice,
                    vatAmount: vatAmount,
                    grossPrice: grossPrice
                };
                
                // Loading ausblenden
                loading.classList.remove('show');
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<i class="fas fa-robot"></i> Angebot erstellen';
                
                showToast('Angebot erfolgreich generiert!');
            }, 2000);
        }
        
        // PDF generieren
        function generatePDF() {
            if (!currentOfferData) {
                showToast('Bitte erstellen Sie zuerst ein Angebot');
                return;
            }
            
            downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Wird erstellt...';
            downloadBtn.disabled = true;
            
            // Erstelle ein temporäres Element für html2canvas
            const tempDiv = document.createElement('div');
            tempDiv.style.width = '794px'; // A4 width in pixels (210mm)
            tempDiv.style.padding = '40px';
            tempDiv.style.background = 'white';
            tempDiv.style.fontFamily = 'Georgia, serif';
            tempDiv.innerHTML = currentOfferData.html;
            
            // Füge es dem Dokument hinzu (unsichtbar)
            tempDiv.style.position = 'absolute';
            tempDiv.style.left = '-9999px';
            document.body.appendChild(tempDiv);
            
            // Erstelle das PDF nach einer kurzen Verzögerung
            setTimeout(() => {
                html2canvas(tempDiv, {
                    scale: 2,
                    useCORS: true,
                    logging: false
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    const imgWidth = 210; // A4 width in mm
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    
                    pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                    
                    // Dateinamen generieren
                    const fileName = `Angebot_${currentOfferData.offerNumber}_${currentOfferData.data.customerName.replace(/\s+/g, '_')}.pdf`;
                    
                    // PDF speichern
                    pdf.save(fileName);
                    
                    // Temporäres Element entfernen
                    document.body.removeChild(tempDiv);
                    
                    downloadBtn.innerHTML = '<i class="fas fa-download"></i> PDF';
                    downloadBtn.disabled = false;
                    
                    showToast('PDF erfolgreich heruntergeladen!');
                }).catch(error => {
                    console.error('PDF Generation Error:', error);
                    showToast('Fehler beim Erstellen des PDFs');
                    downloadBtn.innerHTML = '<i class="fas fa-download"></i> PDF';
                    downloadBtn.disabled = false;
                });
            }, 500);
        }
        
        // Initialisierung beim Laden
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
    </html>
